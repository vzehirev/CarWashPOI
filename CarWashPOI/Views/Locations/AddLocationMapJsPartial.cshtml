<script>
    $(document).ready(drawMap);
    $("#customFile").on("change", updateFilesCount);

    function drawMap() {
        let map = L.map("map").setView([42.7510, 25.2379], 8);

        L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}", {
            maxZoom: 18,
            id: "mapbox/streets-v11",
            tileSize: 512,
            zoomOffset: -1,
            accessToken: "pk.eyJ1IjoidnplaGlyZXYiLCJhIjoiY2s3NGpvNGJsMDYwcDNmbzNqZXM2enM4MiJ9.XENUDCk7i7evvkHshJjKUg",
        })
            .addTo(map);

        let marker = L.marker();

        map.on("click", onMapClick);

        function onMapClick(e) {
            marker.setLatLng(e.latlng).addTo(map);
            $("#latitude").val(e.latlng.lat);
            $("#longitude").val(e.latlng.lng);
        }
    }

    function updateFilesCount() {
        let filesCount = Array.from($(this)[0].files).length;

        let message = filesCount === 1 ? `${filesCount} избран файл` : `${filesCount} избрани файла`;
        $("#customFileLabel").addClass("selected").html(message);
    }
</script>